<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentiment Analysis</title>
</head>
<body>
    <h1>SENTIMENT ANALYSIS</h1>

    <div id="inputdiv">
        <textarea id="inputText" cols="50" rows="10"></textarea>
    </div>

    <div id="buttondiv">
        <button id="analyzeButton">Analyze</button>
    </div>

    <hr>

    <div id="headingdiv">
        <h3 id="sentimentDisplay"></h3>
    </div>

    <script>
        document.getElementById('analyzeButton').addEventListener('click', async () => {
            const textarea = document.getElementById('inputText');
            const sentimentDisplay = document.getElementById('sentimentDisplay');

            if (!textarea || !sentimentDisplay) {
                console.error('Textarea or Sentiment Display Element not found.');
                return;
            }

            const textareaValue = textarea.value || '';

            if (textareaValue === '') {
                console.error('Textarea value is empty.');
                return;
            }

            try {
                const response = await fetch('https://fy7ike3m1h.execute-api.us-east-1.amazonaws.com/ffff', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ text: textareaValue })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const result = await response.json();

                console.log('API Response:', result);

                const body = JSON.parse(result.body);
                const sentiment = body.sentiment || 'Unknown'; // Get the sentiment or set to 'Unknown' if not present
                sentimentDisplay.textContent = `Sentiment: ${sentiment}`;
            } catch (error) {
                console.error('Error sending/receiving API request:', error);
            }
        });
    </script>
</body>
</html>
